import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import dedent from 'ts-dedent';

import { Checkbox } from '@/polaris-vue';

<Meta
  title="Components / Forms / Checkbox"
  component={ Checkbox }
  argTypes={{
    default: {
      table: {
        disable: true,
      },
    },
    checked: {
      control: {
        type: 'text',
      },
      table: {
        type: {
          summary: 'string | "indeterminate"',
        }
      },
    },
    error: {
      control: {
        type: 'text',
      },
      table: {
        type: {
          summary: 'string | boolean',
        },
      },
    },
    blur: {
      description: 'Callback when focus is removed',
      control: {
        disable: true,
      },
      table: {
        type: {
          summary: '() => void',
        },
      },
    },
    change: {
      description: 'Callback when checkbox is toggled',
      control: {
        disable: true,
      },
      table: {
        type: {
          summary: '(event: Event) => void',
        },
      },
    },
    value: {
      description: 'v-model is available for this component, string type should be used with multiple checkbox',
      control: {
        disable: true,
      },
      table: {
        type: {
          summary: 'boolean | string',
        },
      },
    },
    focus: {
      description: 'Callback when checkbox is focused',
      control: {
        disable: true,
      },
      table: {
        type: {
          summary: '() => void',
        },
      },
    },
    input: {
      description: 'using for v-model method',
      control: {
        disable: true
      },
      table: {
        type: {
          summary: '"(newVal: string) => void"',
        },
      },
    },
    'help-text': {
      description: 'Additional text to aide in use',
      control: {
        disable: true,
      },
      table: {
        type: {
          summary: null,
        },
      },
    },
    'label': {
      description: 'Label for the checkbox',
      control: {
        disable: true,
      },
      table: {
        type: {
          summary: null,
        },
      },
    }
  }}
/>

export const DefaultCheckbox = (args, { argTypes }) => ({
  props: Object.keys(argTypes),
  components: { Checkbox },
  template: `
  <div>
    <Checkbox v-bind="$props" v-model="isChecked">
      <template slot="label">Checkbox label</template>
      <template slot="help-text">Basic help text</template>
    </Checkbox>
    <p style="margin-top: 30px">Checked: {{ isChecked }} </p>
  </div>`,
  data() {
    return {
      isChecked: false,
    };
  },
});
DefaultCheckbox.parameters = {
  docs: {
    transformSource: (source) => {
      const tmpSource = source
        .replace(/:value/, 'v-model')
        .replace(/"false"/, 'isChecked')
        .replace(/Checked: false/,'Checked: {{ isChecked }}')
      const fullSource = dedent`
        ${tmpSource}\n
        data() {
          return: {
            isChecked: false,
          };
        },
      `;
      return fullSource;
    }
  },
}

# Checkbox

Checkboxes are most commonly used to give merchants a way to make a range of selections (zero, one, or multiple).
They may also be used as a way to have merchants indicate they agree to specific terms and services.

<Canvas>
  <Story story={DefaultCheckbox} name="Checkbox"></Story>
</Canvas>

<ArgsTable story="Checkbox"/>
